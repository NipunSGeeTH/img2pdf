{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","props","readfiles","event","a","fileList","fileInput","current","files","console","log","length","i","setState","state","images","imgDataUrl","window","URL","createObjectURL","file","createPdf","PDFDocument","create","pdfDoc","fetch","res","arrayBuffer","raw","headers","embedJpg","embedPng","img","page","addPage","drawImage","x","y","width","getWidth","height","getHeight","save","pdfBytes","blob","Blob","type","link","document","createElement","href","download","click","error","lastError","undefined","React","createRef","style","display","flexWrap","this","map","index","flexDirection","src","alt","ref","onChange","multiple","onClick","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"gSAgIeA,E,kDA3Hb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA6CRC,UA9CmB,uCA8CP,WAAOC,GAAP,mBAAAC,EAAA,sDAGV,IAFIC,EAAW,EAAKC,UAAUC,QAAQC,MACtCC,QAAQC,IAAIL,EAASM,QAFX,WAGDC,GACP,EAAKC,UAAS,SAACC,GAAD,MAAY,CACxBC,OAAO,GAAD,mBAAMD,EAAMC,QAAZ,CAAoB,CAAEC,WAAYC,OAAOC,IAAIC,gBAAgBd,EAASO,IAAKQ,KAAMf,EAASO,WAF3FA,EAAI,EAAGA,EAAIP,EAASM,OAAQC,IAAM,EAAlCA,GAHC,2CA9CO,wDAwDnBS,UAxDmB,sBAwDP,4CAAAjB,EAAA,+EAEakB,cAAYC,SAFzB,OAEFC,EAFE,OAGCZ,EAAI,EAHL,YAGQA,EAAI,EAAKE,MAAMC,OAAOJ,QAH9B,iCAIQc,MAAM,EAAKX,MAAMC,OAAOH,GAAGI,YAJnC,cAIFU,EAJE,iBAMUA,EAAIC,cANd,eAMFC,EANE,iBAQ2C,eAA9BF,EAAIG,QAAQ,gBAA+BL,EAAOM,SAASF,GAAKJ,EAAOO,SAASH,GAR7F,QAQAI,EARA,QASAC,EAAOT,EAAOU,WACfC,UAAUH,EAAK,CAClBI,EAAG,EACHC,EAAG,EACHC,MAAOL,EAAKM,WACZC,OAAQP,EAAKQ,cAdT,QAGsC7B,IAHtC,wCAiBeY,EAAOkB,OAjBtB,QAiBFC,EAjBE,OAkBJC,EAAO,IAAIC,KAAK,CAACF,GAAW,CAAEG,KAAM,qBACpCC,EAAOC,SAASC,cAAc,MAC7BC,KAAOjC,OAAOC,IAAIC,gBAAgByB,GACxB,WACfG,EAAKI,SADU,WAEfJ,EAAKK,QAvBG,kDA0BR3C,QAAQ4C,MAAR,MACA,EAAKxC,SAAS,CAACyC,UAAU,EAAD,KA3BhB,0DAtDV,EAAKxC,MAAQ,CACXC,OAAQ,GACRuC,eAAUC,GAEZ,EAAKjD,UAAYkD,IAAMC,YANN,E,0CAQnB,WAAU,IAAD,OACP,OACE,gCACE,6DACA,qBAAKC,MAAO,CAAEC,QAAS,OAAQC,SAAU,QAAzC,SACGC,KAAK/C,MAAMC,OAAO+C,KAAI,SAAC9B,EAAK+B,GAAN,OACrB,sBAAKL,MAAO,CAAEC,QAAS,OAAQK,cAAe,UAA9C,UACE,qBAAKC,IAAKjC,EAAIhB,WAAYkD,IAAI,GAAGR,MAAO,CAAEpB,MAAO,OAAQE,OAAQ,WACjE,8BAAM,SAAWuB,EAAQ,aAI/B,gCACE,uBAAOjB,KAAK,OAAOqB,IAAKN,KAAKvD,UAAW8D,SAAUP,KAAK3D,UAAWmE,UAAQ,IAC1E,wBAAQC,QAAS,WAAQ,EAAKzD,SAAS,CAAEE,OAAQ,MAAjD,mBACA,wBAAQuD,QAAST,KAAKxC,UAAtB,6BAEDwC,KAAK/C,MAAMwC,UAAU,8BAAMO,KAAK/C,MAAMwC,YAAiB,+B,GA1B9CE,IAAMe,WCQTC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFnC,SAASoC,eAAe,SAM1BZ,M","file":"static/js/main.c862a048.chunk.js","sourcesContent":["import './App.css';\nimport React from 'react';\nimport { PDFDocument } from 'pdf-lib'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      images: [],\n      lastError:undefined\n    };\n    this.fileInput = React.createRef();\n  }\n  render() {\n    return (\n      <div>\n        <div>This app is not styled yet</div>\n        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n          {this.state.images.map((img, index) => (\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\n              <img src={img.imgDataUrl} alt=\"\" style={{ width: \"96px\", height: \"128px\" }}></img>\n              <div>{\"Page \" + (index + 1)}</div>\n            </div>\n          ))}\n        </div>\n        <div>\n          <input type=\"file\" ref={this.fileInput} onChange={this.readfiles} multiple></input>\n          <button onClick={() => { this.setState({ images: [] }) }}>Clear</button>\n          <button onClick={this.createPdf}>Generate PDF</button>\n        </div>\n        {this.state.lastError?<div>{this.state.lastError}</div>:<div></div>}\n      </div>);\n  }\n\n  //https://labs.madisoft.it/javascript-image-compression-and-resizing/\n  /* resizeImage = async (file, width, height) => {\n    const blobURL = window.URL.createObjectURL(file);\n    const img = new Image();\n    img.src = blobURL;\n    img.onload = function (ev) {\n      window.URL.revokeObjectURL(blobURL); // release memory\n      // Use the img\n      const canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, width, height);\n    };\n\n  } */\n\n  readfiles = async (event) => {\n    let fileList = this.fileInput.current.files;\n    console.log(fileList.length);\n    for (let i = 0; i < fileList.length; i++) {\n      this.setState((state) => ({\n        images: [...state.images, { imgDataUrl: window.URL.createObjectURL(fileList[i]), file: fileList[i] }]\n      }));\n    }\n  }\n\n  createPdf = async () => {\n    try {\n      const pdfDoc = await PDFDocument.create();\n      for (let i = 0; i < this.state.images.length; i++) {\n        let res=await fetch(this.state.images[i].imgDataUrl);\n        \n        let raw = await res.arrayBuffer();\n        //console.log(raw);\n        const img = await (res.headers['content-type']==='image/jpeg'?pdfDoc.embedJpg(raw):pdfDoc.embedPng(raw));\n        const page = pdfDoc.addPage();\n        page.drawImage(img, {\n          x: 0,\n          y: 0,\n          width: page.getWidth(),\n          height: page.getHeight(),\n        });\n      }\n      const pdfBytes = await pdfDoc.save();\n      var blob = new Blob([pdfBytes], { type: \"application/pdf\" });\n      var link = document.createElement('a');\n      link.href = window.URL.createObjectURL(blob);\n      var fileName = \"file.pdf\";\n      link.download = fileName;\n      link.click();\n    }\n    catch (err) {\n      console.error(err);\n      this.setState({lastError:err});\n    }\n  }\n\n  /* createPdf = async () => {\n    const pdfDoc = await PDFDocument.create();\n    this.createPage(pdfDoc, 1);\n  }\n\n  createPage = (pdfDoc, index) => {\n    this.embedImage(pdfDoc, index).then(() => {\n      if (index > this.state.images.length) {\n        pdfDoc.save().then((blob) => {\n          var link = document.createElement('a');\n          link.href = window.URL.createObjectURL(blob);\n          var fileName = \"file.pdf\";\n          link.download = fileName;\n          link.click();\n        });\n      }\n      this.createPage(pdfDoc, index + 1);\n    });\n  }\n\n  embedImage = async (pdfDoc, index) => {\n    if (index > this.state.images.length) return;\n    let raw = await (await fetch(this.state.images[index - 1])).blob();\n    const img = await pdfDoc.embedJpg(raw);\n    const page = pdfDoc.addPage();\n    page.drawImage(img, {\n      x: 0,\n      y: 0,\n      width: page.getWidth(),\n      height: page.getHeight(),\n    });\n  } */\n\n\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}