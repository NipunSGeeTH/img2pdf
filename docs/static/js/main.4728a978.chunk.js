(this["webpackJsonppdf-app"]=this["webpackJsonppdf-app"]||[]).push([[0],{54:function(e,t,n){},56:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var i=n(13),a=n.n(i),r=n(30),s=n.n(r),c=(n(54),n(19)),o=n(17),l=n.n(o),g=n(18),p=n(22),d=n(31),x=n(32),h=n(49),u=n(48),f=(n(56),n(16)),b=n(7),j="A4",y="US Letter",O="Same as Image",v="Portrait",m="Landscape",S="0",w="20",k="50",D=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).readfiles=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=i.fileInput.current.files,console.log(n.length),a=[],r=0;r<n.length;r++)s=window.URL.createObjectURL(n[r]),a.push({id:i.uuidv4(),imgDataUrl:s,file:n[r]});i.setState((function(e){return{images:[].concat(Object(g.a)(e.images),a)}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.createPdf=Object(p.a)(l.a.mark((function e(){var t,n,a,r,s,c,o,g,p,d,x,h,u,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,f.PDFDocument.create();case 4:n=e.sent,a=0;case 6:if(!(a<i.state.images.length)){e.next=25;break}return e.next=9,fetch(i.state.images[a].imgDataUrl);case 9:return r=e.sent,e.next=12,r.arrayBuffer();case 12:return s=e.sent,t=r.headers.get("content-type"),console.log(r.headers.get("content-type")),e.next=17,"image/jpeg"===r.headers.get("content-type")?n.embedJpg(s):n.embedPng(s);case 17:c=e.sent,o=i.getPageSize(),i.state.pageSize===O&&(o=[c.width,c.height]),g=n.addPage(o),i.state.pageSize===O?g.drawImage(c,{x:0,y:0,width:c.width,height:c.height}):(p=Math.min((g.getWidth()-i.state.pageMargin)/c.width,(g.getHeight()-i.state.pageMargin)/c.height),d=c.width*p,x=c.height*p,console.log(c.width+" "+c.height),console.log(g.getWidth()+" "+g.getHeight()),g.drawImage(c,{x:g.getWidth()/2-d/2,y:g.getHeight()/2-x/2,width:d,height:x}));case 22:a++,e.next=6;break;case 25:return e.next=27,n.save();case 27:h=e.sent,u=new Blob([h],{type:"application/pdf"}),b=window.URL.createObjectURL(u),window.open(b),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(1),console.error(e.t0),i.setState({lastError:e.t0,lastMime:t});case 37:case"end":return e.stop()}}),e,null,[[1,33]])}))),i.handleDrop=function(e,t){console.log("droppedId: "+e+" currentId: "+t);var n=-1,a=Object(g.a)(i.state.images);a.forEach((function(t,i){t.id===e&&(n=i)}));var r=a.splice(n,1)[0],s=-1;a.forEach((function(e,n){e.id===t&&(s=n)})),a.splice(s,0,r),console.log(a),i.setState({images:a})},i.getPageSize=function(){switch(i.state.pageSize){case j:if(i.state.pageOrientation===v)return f.PageSizes.A4;var e=Object(g.a)(f.PageSizes.A4);return e.reverse(),e;case y:if(i.state.pageOrientation===v)return f.PageSizes.Letter;var t=Object(g.a)(f.PageSizes.Letter);return t.reverse(),t;default:return}},i.getAspectRatio=function(){var e=i.getPageSize();return e[0]/e[1]},i.state={images:[],pageOrientation:v,pageSize:j,pageMargin:S,lastError:void 0,lastMime:void 0,forceShowOption:!1},i.fileInput=a.a.createRef(),i}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t={height:"192px",width:"192px",border:"none",display:"flex",background:"white"},n={margin:"0px",flex:"1",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"};this.state.pageMargin===w?n.margin="5px":this.state.pageMargin===k&&(n.margin="10px"),this.state.pageSize!==O&&(t.width=Math.ceil(192*this.getAspectRatio())+"px",t.boxShadow="5px 5px 5px rgb(200,200,200)");var i=Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"file",ref:this.fileInput,onChange:this.readfiles,multiple:!0})}),a=Object(b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flex:"1",justifyContent:"center"},children:this.state.images.map((function(i,a){return Object(b.jsx)("div",{style:{padding:"5px"},draggable:!0,onDragStart:function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",i.id),console.log("Drag start "+a)},onDrop:function(t){t.stopPropagation&&t.stopPropagation();var n=t.dataTransfer.getData("text/plain");console.log("droppedId: "+n),e.handleDrop(n,i.id)},onDragOver:function(e){e.preventDefault&&e.preventDefault()},onDragEnter:function(e){},children:Object(b.jsx)("div",{style:Object(c.a)({},t),children:Object(b.jsx)("div",{style:Object(c.a)(Object(c.a)({},n),{},{backgroundImage:"url('"+i.imgDataUrl+"')"})})})},i.id)}))}),r=Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"20px"},children:"Page margin"}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==S?"purple":"rgb(240,240,240)",color:this.state.pageMargin==S?"white":"black"},onClick:function(){return e.setState({pageMargin:S})},children:"None"}),Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==w?"purple":"rgb(240,240,240)",color:this.state.pageMargin==w?"white":"black"},onClick:function(){return e.setState({pageMargin:w})},children:"Small"}),Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageMargin==k?"purple":"rgb(240,240,240)",color:this.state.pageMargin==k?"white":"black"},onClick:function(){return e.setState({pageMargin:k})},children:"Big"})]})]}),s={};this.state.forceShowOption&&(s.display="block");var o=this.state.forceShowOption?Object(b.jsx)("span",{onClick:function(){e.setState({forceShowOption:!1})},children:"X"}):Object(b.jsx)("span",{}),l=Object(b.jsxs)("div",{className:"options",style:s,children:[Object(b.jsxs)("div",{style:{paddingBottom:"10px",fontSize:"20px",display:"flex",justifyContent:"space-between"},children:[Object(b.jsx)("span",{children:"Options"}),o]}),Object(b.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"10px"},children:"Page orientation"}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageOrientation==v?"purple":"rgb(240,240,240)",color:this.state.pageOrientation==v?"white":"black"},onClick:function(){return e.setState({pageOrientation:v})},children:"Portrait"}),Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageOrientation==m?"purple":"rgb(240,240,240)",color:this.state.pageOrientation==m?"white":"black"},onClick:function(){return e.setState({pageOrientation:m})},children:"Landscape"})]}),Object(b.jsx)("div",{style:{paddingBottom:"10px",fontSize:"16px",color:"gray",paddingTop:"20px"},children:"Page size"}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==j?"purple":"rgb(240,240,240)",color:this.state.pageSize==j?"white":"black"},onClick:function(){return e.setState({pageSize:j})},children:"A4"}),Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==y?"purple":"rgb(240,240,240)",color:this.state.pageSize==y?"white":"black"},onClick:function(){return e.setState({pageSize:y})},children:"US Letter"}),Object(b.jsx)("div",{style:{flex:"1",height:"50px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",background:this.state.pageSize==O?"purple":"rgb(240,240,240)",color:this.state.pageSize==O?"white":"black"},onClick:function(){return e.setState({pageSize:O})},children:"Same as Image"})]}),this.state.pageSize!==O?r:Object(b.jsx)("div",{})]}),g=Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("button",{onClick:function(){e.setState({forceShowOption:!0})},className:"option-btn",children:"PDF Options"}),Object(b.jsx)("button",{children:"Add page"})]}),Object(b.jsx)("button",{onClick:this.createPdf,children:"Generate PDF"})]});return this.state.images.length<1?i:Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh",overflow:"hidden"},children:[Object(b.jsxs)("div",{style:{display:"flex",overflow:"hidden",flex:"1",height:"100%"},children:[Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",flex:"1",overflow:"auto",background:"rgb(240,240,240)"},children:[a,Object(b.jsx)("div",{style:{flex:"1"}})]}),l]}),g]})}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}]),n}(a.a.Component),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),z()}},[[66,1,2]]]);
//# sourceMappingURL=main.4728a978.chunk.js.map